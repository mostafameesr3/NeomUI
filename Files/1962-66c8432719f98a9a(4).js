"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1962],{3168:(e,r,t)=>{t.d(r,{N:()=>o});var i=t(851);t(9509);let n="https://srztgfskipfcrztaevxm.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNyenRnZnNraXBmY3J6dGFldnhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ4Mzc0OTksImV4cCI6MjA2MDQxMzQ5OX0.f2o80_H0yWvTdqJAOJTBE0ivqq5fGpKIAGyigb0U28U",s=null,o=(()=>{if(s)return s;if(!n||!a){{let e="https://srztgfskipfcrztaevxm.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNyenRnZnNraXBmY3J6dGFldnhtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ4Mzc0OTksImV4cCI6MjA2MDQxMzQ5OX0.f2o80_H0yWvTdqJAOJTBE0ivqq5fGpKIAGyigb0U28U";if(e&&r)return s=(0,i.UU)(e,r)}return{from:()=>({select:()=>({data:null,error:{message:"Supabase client not initialized"}}),insert:()=>({data:null,error:{message:"Supabase client not initialized"}}),update:()=>({data:null,error:{message:"Supabase client not initialized"}}),delete:()=>({data:null,error:{message:"Supabase client not initialized"}}),eq:()=>({data:null,error:{message:"Supabase client not initialized"}}),or:()=>({data:null,error:{message:"Supabase client not initialized"}}),order:()=>({data:null,error:{message:"Supabase client not initialized"}})}),auth:{onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}}),signUp:()=>({data:null,error:{message:"Supabase client not initialized"}}),signInWithPassword:()=>({data:null,error:{message:"Supabase client not initialized"}}),signOut:()=>({data:null,error:{message:"Supabase client not initialized"}}),verifyOtp:()=>({data:null,error:{message:"Supabase client not initialized"}}),signInWithOtp:()=>({data:null,error:{message:"Supabase client not initialized"}})},rpc:()=>({data:null,error:{message:"Supabase client not initialized"}})}}return s=(0,i.UU)(n,a)})()},3243:(e,r,t)=>{t.d(r,{A:()=>d,O:()=>u});var i=t(5155),n=t(2115),a=t(5695),s=t(3168),o=t(6019);let l=(0,n.createContext)(void 0);function u(e){let{children:r}=e,[t,u]=(0,n.useState)(null),[d,c]=(0,n.useState)(null),[f,p]=(0,n.useState)(!0),[g,b]=(0,n.useState)("user"),m=(0,a.useRouter)(),v=async()=>{if(!t){b("user");return}try{let{data:r,error:i}=await s.N.rpc("get_user_role",{user_id:t.id});if(i){console.error("Error fetching user role:",i),b("user");return}if(r)console.log("User role fetched successfully:",r),b(r);else{var e;let{error:r}=await s.N.from("profiles").insert({id:t.id,username:(null===(e=t.email)||void 0===e?void 0:e.split("@")[0])||null,role:"user",created_at:new Date().toISOString()});r&&console.error("Error creating user profile:",r),b("user")}}catch(e){console.error("Unexpected error fetching user role:",e),b("user")}};return(0,n.useEffect)(()=>{let{data:{subscription:e}}=s.N.auth.onAuthStateChange(async(e,r)=>{var t;c(r),u(null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null),(null==r?void 0:r.user)?await v():b("user"),p(!1)});return()=>{e.unsubscribe()}},[]),(0,i.jsx)(l.Provider,{value:{user:t,session:d,userRole:g,signUp:async(e,r)=>{let{error:t}=await s.N.auth.signUp({email:e,password:r,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});return{error:t}},signIn:async(e,r)=>{let{error:i}=await s.N.auth.signInWithPassword({email:e,password:r});return!i&&t&&await v(),{error:i}},verifyOtp:async(e,r)=>{let{error:t}=await s.N.auth.verifyOtp({email:e,token:r,type:"email"});return{error:t}},signOut:async()=>{try{let{data:{session:e}}=await s.N.auth.getSession();if(e)try{await s.N.auth.signOut({scope:"local"})}catch(e){console.error("Error signing out:",e)}else console.warn("No active session found, clearing application state only")}catch(e){console.error("Error checking session:",e)}finally{u(null),c(null),b("user"),localStorage.removeItem("supabase.auth.token"),m.push("/")}},loading:f,isDeveloper:()=>"developer"===g||"admin"===g,isAdmin:()=>"admin"===g,isAppAdmin:()=>!!t&&(0,o.N6)(t,g),fetchUserRole:v},children:r})}function d(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3999:(e,r,t)=>{t.d(r,{cn:()=>a});var i=t(2596),n=t(9688);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.QP)((0,i.$)(r))}},6019:(e,r,t)=>{t.d(r,{N6:()=>d,dU:()=>l,fW:()=>u,qc:()=>o}),t(3168);let i=()=>{let e="dc8af604-42a0-4243-a243-0891b636651e,3ec10739-81a7-4c25-99fc-647005ce9877";return e&&""!==e.trim()?e.split(",").map(e=>e.trim()):(console.warn("Warning: NEXT_PUBLIC_ADMIN_ID environment variable is not set or empty."),[])},n=e=>!!e&&i().includes(e),a=e=>"admin"===e,s=e=>"developer"===e,o=(e,r)=>{let t=n(e),i=a(r);return t||i},l=(e,r)=>s(r),u=(e,r)=>o(e,r)||l(e,r),d=(e,r)=>!!e&&o(e.id,r)},7168:(e,r,t)=>{t.d(r,{$:()=>u});var i=t(5155),n=t(2115),a=t(9708),s=t(2085),o=t(3999);let l=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=n.forwardRef((e,r)=>{let{className:t,variant:n,size:s,asChild:u=!1,...d}=e,c=u?a.DX:"button";return(0,i.jsx)(c,{className:(0,o.cn)(l({variant:n,size:s,className:t})),ref:r,...d})});u.displayName="Button"},9852:(e,r,t)=>{t.d(r,{p:()=>s});var i=t(5155),n=t(2115),a=t(3999);let s=n.forwardRef((e,r)=>{let{className:t,type:n,...s}=e;return(0,i.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...s})});s.displayName="Input"}}]);